#include <stdio.h>
#include <stdlib.h>

void imprimirVetor (int *V, int k, int n) {
    for (int i = 0; i <= n; i++) {
        if (V[i] == -1) printf("___ ");
        else printf("%d ", V[i]);
    }
    printf("\n");
}

int raiz(int n, int d) { // 123 -> [3, 2, 1]
    for (int i = 1; i <= d; i++) n /= 10;
    return n % 10;
}

void countingSort (int V[], int S[], int n, int k, int d) {
    imprimirVetor(V, 999, n);
    int C[k + 1];
    for (int i = 0; i <= k; i++) C[i] = 0;
    for (int i = 0; i <= n; i++) C[raiz(V[i], d)] += 1;
    imprimirVetor(C, n + 1, k);
    for (int i = 0; i <= k - 1; i++) C[i + 1] += C[i];
    imprimirVetor(C, n + 1, k);
    for (int i = n; i >= 0; i--) {
        S[C[raiz(V[i], d)] - 1] = V[i];
        C[raiz(V[i], d)] -= 1;
        imprimirVetor(S, 999, n);
    }
}

void radixSort (int V[], int S[], int n, int k, int d) {
    for (int i = 0; i <= d; i++) {
        countingSort(V, S, n, k, i);
        for (int j = 0; j <= n; j++) {
            V[j] = S[j];
            S[j] = -1;
        }
        imprimirVetor(V, 999, n);
    }
}


int main () {
    int A[] = {153, 987, 345, 124, 456, 289, 234, 567, 890, 153}, B[10] = {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1}, n = 9, k = 9, d = 2;
    radixSort(A, B, n, k, d);

/*
153 987 345 124 456 289 234 567 890 153
1 0 0 2 2 1 1 2 0 1
1 1 1 3 5 6 7 9 9 10
___ ___ 153 ___ ___ ___ ___ ___ ___ ___
890 ___ 153 ___ ___ ___ ___ ___ ___ ___
890 ___ 153 ___ ___ ___ ___ ___ 567 ___
890 ___ 153 ___ 234 ___ ___ ___ 567 ___
890 ___ 153 ___ 234 ___ ___ ___ 567 289
890 ___ 153 ___ 234 ___ 456 ___ 567 289
890 ___ 153 124 234 ___ 456 ___ 567 289
890 ___ 153 124 234 345 456 ___ 567 289
890 ___ 153 124 234 345 456 987 567 289
890 153 153 124 234 345 456 987 567 289
890 153 153 124 234 345 456 987 567 289
890 153 153 124 234 345 456 987 567 289
0 0 1 1 1 3 1 0 2 1
0 0 1 2 3 6 7 7 9 10
___ ___ ___ ___ ___ ___ ___ ___ 289 ___
___ ___ ___ ___ ___ ___ 567 ___ 289 ___
___ ___ ___ ___ ___ ___ 567 987 289 ___
___ ___ ___ ___ ___ 456 567 987 289 ___
___ ___ 345 ___ ___ 456 567 987 289 ___
___ 234 345 ___ ___ 456 567 987 289 ___
124 234 345 ___ ___ 456 567 987 289 ___
124 234 345 ___ 153 456 567 987 289 ___
124 234 345 153 153 456 567 987 289 ___
124 234 345 153 153 456 567 987 289 890
124 234 345 153 153 456 567 987 289 890
124 234 345 153 153 456 567 987 289 890
0 3 2 1 1 1 0 0 1 1
0 3 5 6 7 8 8 8 9 10
___ ___ ___ ___ ___ ___ ___ ___ 890 ___
___ ___ ___ ___ 289 ___ ___ ___ 890 ___
___ ___ ___ ___ 289 ___ ___ ___ 890 987
___ ___ ___ ___ 289 ___ ___ 567 890 987
___ ___ ___ ___ 289 ___ 456 567 890 987
___ ___ 153 ___ 289 ___ 456 567 890 987
___ 153 153 ___ 289 ___ 456 567 890 987
___ 153 153 ___ 289 345 456 567 890 987
___ 153 153 234 289 345 456 567 890 987
124 153 153 234 289 345 456 567 890 987
124 153 153 234 289 345 456 567 890 987
*/
}